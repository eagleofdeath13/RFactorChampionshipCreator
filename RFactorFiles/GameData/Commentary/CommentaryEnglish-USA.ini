
// MAS files of sound samples make streaming more efficient.  You can have more
// than one of these, they will be searched in the given order.
MAS = CommentaryEnglish-USA.MAS

// Each commentary event is something like a phrase.  It can have one or more audio
// clips (preferably MP3s but WAV files might work, too) to be played together.  There
// can be some logic in the commentary event, depending on one of the three inputs
// provided.  Inputs come from the app and possibly from a plug-in in the future.
// Randomness, volume, and other properties can also be defined.
//
// Event properties:
// - Detail = must be less than or equal to optional commentary detail to play, range
//            is 1 (plays at any detail level except off) to 4 (plays only at high detail).
// - Spacing = how long in seconds before this event can be repeated
// - Priority = compared to other events to order on the queue, range is 0.0 (low) to 1.0 (high)
// - Probability = probability that event is played, range is 0.0 (no chance) to 1.0 (big chance)
// - TTL = time to live on the queue in seconds, event times out if it isn't played soon enough
// - Break = time to wait after event is played before any other event can begin
// - Volume = this applies to the next file or files to be played after it appears (it can be
//            used multiple times within an event)
// - Repeat = whether to repeat until "Duration" ends (not currently supported)
// - Duration = how long to repeat (not currently supported)
//
// Current options for "Variable" and each variable's range:
// - Random = 0.0 - 1.0
// - Input1, Input2, Input3 = parameters passed into function, which can also be multiplied by appending:
//     IntFunc<x>,<y>,<z>   = ( int(input*x) / int(y) ) % int(z)
//     RoundFunc<x>,<y>,<z> = ( round(input*x) / round(y) ) % round(z)
//     FloatFunc<x>,<y>,<z> = ( (input*x) / y ) % z;
//     Note: rounding function rounds exact halfway values to nearest even integer
//     Note: if y or z are not given (or evaluate to zero), operation with them is not performed.
// - Session = 0 - 7, 0=test day, 1=practice1 ..., 5=qual, 6=warmup, 7=race
// - <"hardcoded" number>, such as -0.37, range is that of IEEE double-precision floating point number
//
// "Value" is compared to nearest "Variable" above it.  "Value" can be a single numerical value or
// a range.  See examples on how to define inclusive and exclusive ranges (less than or equal, etc.)
//
// "File" should be a file that can be found in one of the given MAS files.  But if you must, it can
// also be a loose file (which you will need to give the full path from the root of rFactor for).
//
// "PlayEvent" plays another event directly (without any checks for detail/priority/probability/etc.).
// Nearest "Variable" above is passed in as Input1 to the given event.  Inputs 2 & 3 remain the same.


// Event when checkered flag is out
Event=CheckeredFlag
{
  // Event properties (note that these are not applied if this event is played by another event)
  Detail=4
  Spacing=15.0
  Priority=0.2
  Probability=0.7
  TTL=5.0
  Break=0.25

  // Repeat until duration ends
  Repeat=Off
  Duration=0.0

  // Volume can be set before individual Files if necessary
  Volume=1.0

  // Variable used to choose one File to play for this Sound (Variable compared to Value)
  Variable=Random   // random number from 0.0 to 1.0
  {
    Volume=1.0
    Value=(>=0.0,< 0.5) { File=flag_checkered.mp3 }
    Value=(>=0.5,<=1.0) { File=flag_checkered2.mp3 }
  }
}

// This event says time down to a tenth of a second (input1 should be time).
// Same as LaptimeHundredth *except* the first two parameters of each Variable=Input1RoundFunc are
// divided by 10 (so that it rounds to the nearest tenth rather than hundredth).
Event=LaptimeTenth
{
  // Event properties (note that these are not applied if this event is played by another event)
  Detail=3
  Spacing=5.0
  Priority=0.5
  Probability=1.0
  TTL=10.0
  Break=0.25

  // Repeat until duration ends
  Repeat=Off
  Duration=0.0

  // Volume can be set before individual Files if necessary
  Volume=1.0

  // Input1 should be laptime, note that 100+ minutes is not supported properly (sorry, slowpoke)
  Variable=Input1RoundFunc,10,6000,10  // tens of minutes
  {
    Value=0
    {
      Variable=Input1RoundFunc,10,600,10  // ones of minutes
      {
        // Say nothing for zero minutes
        Value=1 { File=num_1.mp3 }
        Value=2 { File=num_2.mp3 }
        Value=3 { File=num_3.mp3 }
        Value=4 { File=num_4.mp3 }
        Value=5 { File=num_5.mp3 }
        Value=6 { File=num_6.mp3 }
        Value=7 { File=num_7.mp3 }
        Value=8 { File=num_8.mp3 }
        Value=9 { File=num_9.mp3 }
      }
    }
    Value=1
    {
      Variable=Input1RoundFunc,10,600,10  // ones of minutes
      {
        Value=0 { File=num_10.mp3 }
        Value=1 { File=num_11.mp3 }
        Value=2 { File=num_12.mp3 }
        Value=3 { File=num_13.mp3 }
        Value=4 { File=num_14.mp3 }
        Value=5 { File=num_15.mp3 }
        Value=6 { File=num_16.mp3 }
        Value=7 { File=num_17.mp3 }
        Value=8 { File=num_18.mp3 }
        Value=9 { File=num_19.mp3 }
      }
    }
    Value=2,9
    {
      Variable=Input1RoundFunc,10,6000,10  // tens of minutes
      {
        Value=2 { File=num_20.mp3 }
        Value=3 { File=num_30.mp3 }
        Value=4 { File=num_40.mp3 }
        Value=5 { File=num_50.mp3 }
        Value=6 { File=num_60.mp3 }
        Value=7 { File=num_70.mp3 }
        Value=8 { File=num_80.mp3 }
        Value=9 { File=num_90.mp3 }
      }

      Variable=Input1RoundFunc,10,600,10  // ones of minutes
      {
        Value=0 { File=num_0.mp3 }
        Value=1 { File=num_1.mp3 }
        Value=2 { File=num_2.mp3 }
        Value=3 { File=num_3.mp3 }
        Value=4 { File=num_4.mp3 }
        Value=5 { File=num_5.mp3 }
        Value=6 { File=num_6.mp3 }
        Value=7 { File=num_7.mp3 }
        Value=8 { File=num_8.mp3 }
        Value=9 { File=num_9.mp3 }
      }
    }
  }

  // Now seconds
  Variable=Input1RoundFunc,10,100,6  // tens of seconds
  {
    Value=0  // Skip first zero if minutes were also zero
    {
      Variable=Input1RoundFunc,10,600,0  // all minutes (no valid modulus)
      {
        Value=1,99 { File=num_0.mp3 }
      }

      Variable=Input1RoundFunc,10,10,10  // ones of seconds
      {
        Value=0 { File=num_0.mp3 }
        Value=1 { File=num_1.mp3 }
        Value=2 { File=num_2.mp3 }
        Value=3 { File=num_3.mp3 }
        Value=4 { File=num_4.mp3 }
        Value=5 { File=num_5.mp3 }
        Value=6 { File=num_6.mp3 }
        Value=7 { File=num_7.mp3 }
        Value=8 { File=num_8.mp3 }
        Value=9 { File=num_9.mp3 }
      }
    }
    Value=1
    {
      Variable=Input1RoundFunc,10,10,10  // ones of seconds
      {
        Value=0 { File=num_10.mp3 }
        Value=1 { File=num_11.mp3 }
        Value=2 { File=num_12.mp3 }
        Value=3 { File=num_13.mp3 }
        Value=4 { File=num_14.mp3 }
        Value=5 { File=num_15.mp3 }
        Value=6 { File=num_16.mp3 }
        Value=7 { File=num_17.mp3 }
        Value=8 { File=num_18.mp3 }
        Value=9 { File=num_19.mp3 }
      }
    }
    Value=2,5
    {
      Variable=Input1RoundFunc,10,100,6  // tens of seconds
      {
        Value=2 { File=num_20.mp3 }
        Value=3 { File=num_30.mp3 }
        Value=4 { File=num_40.mp3 }
        Value=5 { File=num_50.mp3 }
      }

      Variable=Input1RoundFunc,10,10,10  // ones of seconds
      {
        Value=1 { File=num_1.mp3 }
        Value=2 { File=num_2.mp3 }
        Value=3 { File=num_3.mp3 }
        Value=4 { File=num_4.mp3 }
        Value=5 { File=num_5.mp3 }
        Value=6 { File=num_6.mp3 }
        Value=7 { File=num_7.mp3 }
        Value=8 { File=num_8.mp3 }
        Value=9 { File=num_9.mp3 }
      }
    }
  }

  // Say "point" before fractions of a second
  File=point.mp3

  // Tenths of a second
  Variable=Input1RoundFunc,10,1,10  // tenths of seconds
  {
    Value=0 { File=num_0.mp3 }
    Value=1 { File=num_1.mp3 }
    Value=2 { File=num_2.mp3 }
    Value=3 { File=num_3.mp3 }
    Value=4 { File=num_4.mp3 }
    Value=5 { File=num_5.mp3 }
    Value=6 { File=num_6.mp3 }
    Value=7 { File=num_7.mp3 }
    Value=8 { File=num_8.mp3 }
    Value=9 { File=num_9.mp3 }
  }
}

// This event says time down to a hundredth of a second (input1 should be time).
// Same as LaptimeTenth *except* the first two parameters of each Variable=Input1RoundFunc are
// multiplied by 10 (so that it rounds to the nearest hundredth rather than tenth).
Event=LaptimeHundredth
{
  // Event properties (note that these are not applied if this event is played by another event)
  Detail=3
  Spacing=5.0
  Priority=0.5
  Probability=1.0
  TTL=10.0
  Break=0.25

  // Repeat until duration ends
  Repeat=Off
  Duration=0.0

  // Volume can be set before individual Files if necessary
  Volume=1.0

  // Input1 should be laptime, note that 100+ minutes is not supported properly (sorry, slowpoke)
  Variable=Input1RoundFunc,100,60000,10  // tens of minutes
  {
    Value=0
    {
      Variable=Input1RoundFunc,100,6000,10  // ones of minutes
      {
        // Say nothing for zero minutes
        Value=1 { File=num_1.mp3 }
        Value=2 { File=num_2.mp3 }
        Value=3 { File=num_3.mp3 }
        Value=4 { File=num_4.mp3 }
        Value=5 { File=num_5.mp3 }
        Value=6 { File=num_6.mp3 }
        Value=7 { File=num_7.mp3 }
        Value=8 { File=num_8.mp3 }
        Value=9 { File=num_9.mp3 }
      }
    }
    Value=1
    {
      Variable=Input1RoundFunc,100,6000,10  // ones of minutes
      {
        Value=0 { File=num_10.mp3 }
        Value=1 { File=num_11.mp3 }
        Value=2 { File=num_12.mp3 }
        Value=3 { File=num_13.mp3 }
        Value=4 { File=num_14.mp3 }
        Value=5 { File=num_15.mp3 }
        Value=6 { File=num_16.mp3 }
        Value=7 { File=num_17.mp3 }
        Value=8 { File=num_18.mp3 }
        Value=9 { File=num_19.mp3 }
      }
    }
    Value=2,9
    {
      Variable=Input1RoundFunc,100,60000,10  // tens of minutes
      {
        Value=2 { File=num_20.mp3 }
        Value=3 { File=num_30.mp3 }
        Value=4 { File=num_40.mp3 }
        Value=5 { File=num_50.mp3 }
        Value=6 { File=num_60.mp3 }
        Value=7 { File=num_70.mp3 }
        Value=8 { File=num_80.mp3 }
        Value=9 { File=num_90.mp3 }
      }

      Variable=Input1RoundFunc,100,6000,10  // ones of minutes
      {
        Value=0 { File=num_0.mp3 }
        Value=1 { File=num_1.mp3 }
        Value=2 { File=num_2.mp3 }
        Value=3 { File=num_3.mp3 }
        Value=4 { File=num_4.mp3 }
        Value=5 { File=num_5.mp3 }
        Value=6 { File=num_6.mp3 }
        Value=7 { File=num_7.mp3 }
        Value=8 { File=num_8.mp3 }
        Value=9 { File=num_9.mp3 }
      }
    }
  }

  // Now seconds
  Variable=Input1RoundFunc,100,1000,6  // tens of seconds
  {
    Value=0  // Skip first zero if minutes were also zero
    {
      Variable=Input1RoundFunc,100,6000,0  // all minutes (no valid modulus)
      {
        Value=1,99 { File=num_0.mp3 }
      }

      Variable=Input1RoundFunc,100,100,10  // ones of seconds
      {
        Value=0 { File=num_0.mp3 }
        Value=1 { File=num_1.mp3 }
        Value=2 { File=num_2.mp3 }
        Value=3 { File=num_3.mp3 }
        Value=4 { File=num_4.mp3 }
        Value=5 { File=num_5.mp3 }
        Value=6 { File=num_6.mp3 }
        Value=7 { File=num_7.mp3 }
        Value=8 { File=num_8.mp3 }
        Value=9 { File=num_9.mp3 }
      }
    }
    Value=1
    {
      Variable=Input1RoundFunc,100,100,10  // ones of seconds
      {
        Value=0 { File=num_10.mp3 }
        Value=1 { File=num_11.mp3 }
        Value=2 { File=num_12.mp3 }
        Value=3 { File=num_13.mp3 }
        Value=4 { File=num_14.mp3 }
        Value=5 { File=num_15.mp3 }
        Value=6 { File=num_16.mp3 }
        Value=7 { File=num_17.mp3 }
        Value=8 { File=num_18.mp3 }
        Value=9 { File=num_19.mp3 }
      }
    }
    Value=2,5
    {
      Variable=Input1RoundFunc,100,1000,6  // tens of seconds
      {
        Value=2 { File=num_20.mp3 }
        Value=3 { File=num_30.mp3 }
        Value=4 { File=num_40.mp3 }
        Value=5 { File=num_50.mp3 }
      }

      Variable=Input1RoundFunc,100,100,10  // ones of seconds
      {
        Value=1 { File=num_1.mp3 }
        Value=2 { File=num_2.mp3 }
        Value=3 { File=num_3.mp3 }
        Value=4 { File=num_4.mp3 }
        Value=5 { File=num_5.mp3 }
        Value=6 { File=num_6.mp3 }
        Value=7 { File=num_7.mp3 }
        Value=8 { File=num_8.mp3 }
        Value=9 { File=num_9.mp3 }
      }
    }
  }

  // Say "point" before fractions of a second
  File=point.mp3

  // Tenths of a second
  Variable=Input1RoundFunc,100,10,10  // tenths of seconds
  {
    Value=0 { File=num_0.mp3 }
    Value=1 { File=num_1.mp3 }
    Value=2 { File=num_2.mp3 }
    Value=3 { File=num_3.mp3 }
    Value=4 { File=num_4.mp3 }
    Value=5 { File=num_5.mp3 }
    Value=6 { File=num_6.mp3 }
    Value=7 { File=num_7.mp3 }
    Value=8 { File=num_8.mp3 }
    Value=9 { File=num_9.mp3 }
  }

  // Hundredths of a second
  Variable=Input1RoundFunc,100,1,10  // hundredths of seconds
  {
    Value=0 { File=num_0.mp3 }
    Value=1 { File=num_1.mp3 }
    Value=2 { File=num_2.mp3 }
    Value=3 { File=num_3.mp3 }
    Value=4 { File=num_4.mp3 }
    Value=5 { File=num_5.mp3 }
    Value=6 { File=num_6.mp3 }
    Value=7 { File=num_7.mp3 }
    Value=8 { File=num_8.mp3 }
    Value=9 { File=num_9.mp3 }
  }
}

// Tells player his laptime
Event=PlayerLaptime // Input1 will be last laptime
{
  // Event properties (note that these are not applied if this event is played by another event)
  Detail=1  // lap time is based on option, so this needs to be played at all detail levels
  Spacing=5.0
  Priority=0.5
  Probability=1.0
  TTL=10.0
  Break=0.25

  // Repeat until duration ends
  Repeat=Off
  Duration=0.0

  // Play introduction to laptime
  Volume=1.0

  // Variable used to choose one File to play for this Sound (Variable compared to Value)
  Variable=Random   // random number from 0.0 to 1.0
  {
    Value=(>=0.0,< 0.5) { File=lap_time.mp3 }
    Value=(>=0.5,<=1.0) { File=lap_time2.mp3 }
  }

  // Variable used to choose one File to play for this Sound (Variable compared to Value).
  // Tenths or hundredths?  Comment out the one you don't want:
  // In tenths:
//  Variable=Input1RoundFunc,10,60000,0  // hundreds of minutes (no valid modulus, so 1000 minutes returns 10 here)
//  {
//    Value=0  // only say laptime if less than 100 minutes (that's the maximum that the "LaptimeTenth" event supports)
//    {
//      Variable=Input1 { PlayEvent=LaptimeTenth } // pass our input1 into the played event as its input1
//    }
//  }
  // In hundredths
  Variable=Input1RoundFunc,100,600000,0  // hundreds of minutes (no valid modulus, so 1000 minutes returns 10 here)
  {
    Value=0  // only say laptime if less than 100 minutes (that's the maximum that the "LaptimeHundredth" event supports)
    {
      Variable=Input1 { PlayEvent=LaptimeHundredth } // pass our input1 into the played event as its input1
    }
  }
}

Event=PlayerLuckyDog
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=position_got_luckydog.mp3
}

Event=GreenFlag // right when green flag comes out
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  Variable=Random
  {
    Value=(>=0.0,< 0.5) { File=flag_green.mp3 }
    Value=(>=0.5,<=1.0) { File=flag_green2.mp3 }
  }
}

Event=PendingFrozenClosed // pending full-course yellow, track order frozen, pits closed rule
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=flag_yellow.mp3
}

Event=PendingClosed // pending full-course yellow, race to the line, pits closed rule
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=flag_yellow_race.mp3
}

Event=PendingFrozen // pending full-course yellow, track order frozen, pits open rule
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=flag_yellow.mp3
}

Event=Pending // pending full-course yellow, race to the line, pits open rule
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=flag_yellow_race.mp3
}

Event=CautionClosed // leader took yellow, pits closed rule
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=leader_yellow_closed.mp3
}

Event=Caution // leader took yellow, pits open rule
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=leader_yellow.mp3
}

Event=PitsOpenLead // pits now open to vehicles on lead lap
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=pits_open_leadlap.mp3
}

Event=PitsOpen // pits now open to everybody
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=pits_open.mp3
}

Event=CautionEndDouble // last lap of full-course yellow, double-file restart
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=caution_end_double.mp3
}

Event=CautionEnd // last lap of full-course yellow
{
  Detail=3
  Spacing=5.0
  Priority=0.8
  Probability=1.0
  TTL=10.0
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=caution_end.mp3
}


// Spotter events
Event=Clear // Input1 will be 0=first time, 1=subsequent times
{
  Detail=2
  Spacing=2.0
  Priority=0.9
  Probability=1.0
  TTL=0.5
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  Variable=Input1
  {
    Value=1
    {
      Variable=Random
      {
        Value=(>=0.0,<0.7) { File=still.mp3 }
      }
    }
  }

  // Keep repeating or only say once?  Comment out whichever you don't want.  Also see the
  // PLR file option "Spotter Behind" for more info.
  // Keep repeating:
//  File=clear.mp3
  // Say once:
  Variable=Input1
  {
    Value=0 { File=clear.mp3 }
  }
}

Event=Clear Inside // can only be said once after "Cars Both Sides"
{
  Detail=2
  Spacing=2.0
  Priority=0.9
  Probability=1.0
  TTL=0.5
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=clear inside.mp3
}

Event=Clear Outside // can only be said once after "Cars Both Sides"
{
  Detail=2
  Spacing=2.0
  Priority=0.9
  Probability=1.0
  TTL=0.5
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  File=clear outside.mp3
}

Event=Car Inside // Input1 will be 0=first time, 1=subsequent times
{
  Detail=2
  Spacing=2.0
  Priority=0.9
  Probability=1.0
  TTL=0.5
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  Variable=Input1
  {
    Value=1
    {
      Variable=Random
      {
        Value=(>=0.0,<0.7) { File=still.mp3 }
      }
    }
  }
  File=car_inside.mp3
}

Event=Cars Inside // Input1 will be 0=first time, 1=subsequent times
{
  Detail=2
  Spacing=2.0
  Priority=0.9
  Probability=1.0
  TTL=0.5
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  Variable=Input1
  {
    Value=1
    {
      Variable=Random
      {
        Value=(>=0.0,<0.7) { File=still.mp3 }
      }
    }
  }
  File=car_3_wide_out.mp3
}

Event=Car Outside // Input1 will be 0=first time, 1=subsequent times
{
  Detail=2
  Spacing=2.0
  Priority=0.9
  Probability=1.0
  TTL=0.5
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  Variable=Input1
  {
    Value=1
    {
      Variable=Random
      {
        Value=(>=0.0,<0.7) { File=still.mp3 }
      }
    }
  }
  File=car_outside.mp3
}

Event=Cars Outside // Input1 will be 0=first time, 1=subsequent times
{
  Detail=2
  Spacing=2.0
  Priority=0.9
  Probability=1.0
  TTL=0.5
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  Variable=Input1
  {
    Value=1
    {
      Variable=Random
      {
        Value=(>=0.0,<0.7) { File=still.mp3 }
      }
    }
  }
  File=car_3_wide_in.mp3
}

Event=Cars Both Sides // Input1 will be 0=first time, 1=subsequent times
{
  Detail=2
  Spacing=2.0
  Priority=0.9
  Probability=1.0
  TTL=0.5
  Break=0.25
  Repeat=Off
  Duration=0.0
  Volume=1.0
  Variable=Input1
  {
    Value=1
    {
      Variable=Random
      {
        Value=(>=0.0,<0.7) { File=still.mp3 }
      }
    }
  }
  File=car_3_wide_mid.mp3
}

